<video id="video" preload="auto" controls="controls" width="960" height="540" poster="video.png">		
	<source src="video.mp4" type="video/mp4">
	<track kind="captions" label="English" src="video.vtt" srclang="en" default>
</video>

<audio id="audio" preload="auto">
	<source src="audio.mp3" type="audio/mp3">
</audio>


<script>

(function()
	{
	
		//get references to the video and audio elements
		var video = document.getElementById('video');
		var audio = document.getElementById('audio');
	
	
		//if media controllers are supported, 
		//create a controller instance for the video and audio
		if(typeof(window.MediaController) === 'function')
		{
			var controller = new MediaController();
			audio.controller = controller;
			video.controller = controller;
		}	
		
		//else create a null controller reference for comparison
		else
		{
			controller = null;
		}
		
		//reduce the video volume slightly to emphasise the audio
		audio.volume = 1;
		video.volume = 0.8;
	

		//when the video plays
		video.addEventListener('play', function() 
		{
			//if we have audio but no controller 
			//and the audio is paused, play that too
			if(!controller && audio.paused)
			{
				audio.play();
			}
		}, false);
		
		//when the video pauses
		video.addEventListener('pause', function()
		{
			//if we have audio but no controller 
			//and the audio isn't paused, pause that too
			if(!controller && !audio.paused)
			{
				audio.pause();
			}
		}, false);

		//when the video ends
		video.addEventListener('ended', function()
		{
			//if we have a controller, pause that
			if(controller)
			{
				controller.pause();
			}
			//otherwise pause the video and audio separately
			else
			{
				video.pause();
				audio.pause();
			}
		}, false);
		
		
		//when the video time is updated
		video.addEventListener('timeupdate', function()
		{
			//if we have audio but no controller, 
			//and the audio has sufficiently loaded
			if(!controller && audio.readyState >= 4)
			{
				//if the audio and video times are different,
				//update the audio time to keep it in sync
				if(Math.ceil(audio.currentTime) != Math.ceil(video.currentTime))
				{
					audio.currentTime = video.currentTime;
				}
			}
		}, false);
		
	
	
	})();
	</script>